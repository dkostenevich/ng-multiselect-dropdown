!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-multiselect-dropdown",["exports","@angular/core","@angular/forms","@angular/common"],t):t((e=e||self)["ng-multiselect-dropdown"]={},e.ng.core,e.ng.forms,e.ng.common)}(this,function(e,t,i,n){"use strict";function o(e,t,i,n){var o,s=arguments.length,l=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(l=(s<3?o(l):s>3?o(t,i,l):o(t,i))||l);return s>3&&l&&Object.defineProperty(t,i,l),l}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var l=function(e){"string"==typeof e&&(this.id=this.text=e),"object"==typeof e&&(this.id=e.id,this.text=e.text)},r={provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return c}),multi:!0},d=function(){},c=function(){function e(e){this.cdr=e,this._data=[],this.selectedItems=[],this.isDropdownOpen=!0,this._placeholder="Select",this.filter=new l(this.data),this.defaultSettings={singleSelection:!1,idField:"id",textField:"text",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,customSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,"class":"multiselect-dropdown"},this.disabled=!1,this.onFilterChange=new t.EventEmitter,this.onDropDownOpen=new t.EventEmitter,this.onDropDownClose=new t.EventEmitter,this.onSelect=new t.EventEmitter,this.onDeSelect=new t.EventEmitter,this.onSelectAll=new t.EventEmitter,this.onDeSelectAll=new t.EventEmitter,this.onTouchedCallback=d,this.onChangeCallback=d}return Object.defineProperty(e.prototype,"placeholder",{set:function(e){this._placeholder=e||"Select"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{set:function(e){this._settings=Object.assign(this.defaultSettings,e||{})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){var t=this;this._data=e?e.map(function(e){return new l("string"==typeof e?e:{id:e[t._settings.idField],text:e[t._settings.textField]})}):[]},enumerable:!0,configurable:!0}),e.prototype.onFilterTextChange=function(e){this.onFilterChange.emit(e)},e.prototype.onItemClick=function(e,t){if(this.disabled)return!1;var i=this.isSelected(t),n=-1===this._settings.limitSelection||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;i?this.removeSelected(t):n&&this.addSelected(t),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()},e.prototype.writeValue=function(e){var t=this;if(e!==undefined&&null!==e&&e.length>0)if(this._settings.singleSelection)try{if(e.length>=1){var i=e[0];this.selectedItems=[new l("string"==typeof i?i:{id:i[this._settings.idField],text:i[this._settings.textField]})]}}catch(o){}else{var n=e.map(function(e){return new l("string"==typeof e?e:{id:e[t._settings.idField],text:e[t._settings.textField]})});this._settings.limitSelection>0?this.selectedItems=n.splice(0,this._settings.limitSelection):this.selectedItems=n}else this.selectedItems=[];this.onChangeCallback(e)},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.onTouched=function(){this.closeDropdown(),this.onTouchedCallback()},e.prototype.trackByFn=function(e,t){return t.id},e.prototype.isSelected=function(e){var t=!1;return this.selectedItems.forEach(function(i){e.id===i.id&&(t=!0)}),t},e.prototype.isLimitSelectionReached=function(){return this._settings.limitSelection===this.selectedItems.length},e.prototype.isAllItemsSelected=function(){return this._data.length===this.selectedItems.length},e.prototype.showButton=function(){return!this._settings.singleSelection&&!(this._settings.limitSelection>0)},e.prototype.itemShowRemaining=function(){return this.selectedItems.length-this._settings.itemsShowLimit},e.prototype.addSelected=function(e){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(e)):this.selectedItems.push(e),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(e))},e.prototype.removeSelected=function(e){var t=this;this.selectedItems.forEach(function(i){e.id===i.id&&t.selectedItems.splice(t.selectedItems.indexOf(i),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(e))},e.prototype.emittedValue=function(e){var t=this,i=[];if(Array.isArray(e))e.map(function(e){e.id===e.text?i.push(e.text):i.push(t.objectify(e))});else if(e)return e.id===e.text?e.text:this.objectify(e);return i},e.prototype.objectify=function(e){var t={};return t[this._settings.idField]=e.id,t[this._settings.textField]=e.text,t},e.prototype.toggleDropdown=function(e){e.preventDefault(),this.disabled&&this._settings.singleSelection||(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen?this.onDropDownOpen.emit():this.onDropDownClose.emit())},e.prototype.closeDropdown=function(){this._settings.clearSearchFilter&&(this.filter.text=""),this._settings.defaultOpen&&(this._settings.defaultOpen=!1,this.onDropDownClose.emit())},e.prototype.toggleSelectAll=function(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this._data.slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))},o([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"placeholder",null),o([t.Input(),s("design:type",Object)],e.prototype,"disabled",void 0),o([t.Input(),s("design:type",Object),s("design:paramtypes",[Object])],e.prototype,"settings",null),o([t.Input(),s("design:type",Array),s("design:paramtypes",[Array])],e.prototype,"data",null),o([t.Output("onFilterChange"),s("design:type",t.EventEmitter)],e.prototype,"onFilterChange",void 0),o([t.Output("onDropDownOpen"),s("design:type",t.EventEmitter)],e.prototype,"onDropDownOpen",void 0),o([t.Output("onDropDownClose"),s("design:type",t.EventEmitter)],e.prototype,"onDropDownClose",void 0),o([t.Output("onSelect"),s("design:type",t.EventEmitter)],e.prototype,"onSelect",void 0),o([t.Output("onDeSelect"),s("design:type",t.EventEmitter)],e.prototype,"onDeSelect",void 0),o([t.Output("onSelectAll"),s("design:type",t.EventEmitter)],e.prototype,"onSelectAll",void 0),o([t.Output("onDeSelectAll"),s("design:type",t.EventEmitter)],e.prototype,"onDeSelectAll",void 0),o([t.HostListener("blur"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],e.prototype,"onTouched",null),e=o([t.Component({selector:"ng-multiselect-dropdown",template:'<div tabindex="=0" (blur)="onTouched()" [ngClass]="_settings.class" (clickOutside)="closeDropdown()">\n  <div [class.disabled]="disabled">\n    <span tabindex="-1" class="dropdown-btn" (click)="toggleDropdown($event)">\n      <span *ngIf="selectedItems.length == 0">{{_placeholder}}</span>\n      <span class="selected-item" *ngFor="let item of selectedItems;trackBy: trackByFn;let k = index" [hidden]="k > _settings.itemsShowLimit-1">\n        {{item.text}}\n        <a (click)="onItemClick($event,item)">x</a>\n      </span>\n      <span class="dropdown-icon">\n        <span class="remaining" *ngIf="itemShowRemaining()>0">+{{itemShowRemaining()}}</span>\n        <span [ngClass]="_settings.defaultOpen ? \'dropdown-up\' : \'dropdown-down\'"></span>\n      </span>\n    </span>\n  </div>\n  <div class="dropdown-list" [hidden]="!_settings.defaultOpen">\n    <ul class="item1">\n      <li (click)="toggleSelectAll()" *ngIf="_data.length > 0 && !_settings.singleSelection && _settings.enableCheckAll && _settings.limitSelection===-1" class="multiselect-item-checkbox">\n        <input type="checkbox" aria-label="multiselect-select-all" [checked]="isAllItemsSelected()" [disabled]="disabled || isLimitSelectionReached()" />\n        <div>{{!isAllItemsSelected() ? _settings.selectAllText : _settings.unSelectAllText}}</div>\n      </li>\n      <li class="filter-textbox" *ngIf="_settings.allowSearchFilter">\n        <input type="text" aria-label="multiselect-search" [readOnly]="disabled" [placeholder]="_settings.searchPlaceholderText" [(ngModel)]="filter.text" (ngModelChange)="onFilterTextChange($event)">\n      </li>\n    </ul>\n    <ul class="item2" [style.maxHeight]="_settings.maxHeight+\'px\'">\n      <li *ngFor="let item of _data | ng2ListFilter:filter:_settings.customSearchFilter; let i = index;" (click)="onItemClick($event,item)" class="multiselect-item-checkbox">\n        <input type="checkbox" aria-label="multiselect-item" [checked]="isSelected(item)" [disabled]="disabled || (isLimitSelectionReached() && !isSelected(item))" />\n        <div>{{item.text}}</div>\n      </li>\n      <li class=\'no-data\' *ngIf="_data.length == 0">\n        <h5>{{_settings.noDataAvailablePlaceholderText}}</h5>\n      </li>\n    </ul>\n  </div>\n</div>',providers:[r],changeDetection:t.ChangeDetectionStrategy.OnPush,styles:['.multiselect-dropdown{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown .dropdown-btn{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown .dropdown-btn .selected-item{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left}.multiselect-dropdown .dropdown-btn .selected-item a{text-decoration:none;padding-top:2px;padding-left:2px;color:#fff}.multiselect-dropdown .dropdown-btn .selected-item:hover{box-shadow:1px 1px #959595}.multiselect-dropdown .dropdown-btn .dropdown-down{display:inline-block;top:10px;width:0;height:0;border-top:10px solid #adadad;border-left:10px solid transparent;border-right:10px solid transparent}.multiselect-dropdown .dropdown-btn .dropdown-up{display:inline-block;width:0;height:0;border-bottom:10px solid #adadad;border-left:10px solid transparent;border-right:10px solid transparent}.multiselect-dropdown .dropdown-btn .dropdown-icon{float:right!important;padding-right:4px}.multiselect-dropdown .dropdown-btn .dropdown-icon .remaining{padding-right:6px}.multiselect-dropdown .disabled>span{background-color:#eceeef}.multiselect-dropdown .dropdown-list{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.multiselect-dropdown .dropdown-list ul{padding:0;list-style:none;overflow:auto;margin:0}.multiselect-dropdown .dropdown-list li{padding:6px 10px;cursor:pointer;text-align:left}.multiselect-dropdown .dropdown-list .filter-textbox{border-bottom:1px solid #ccc;position:relative;padding:10px}.multiselect-dropdown .dropdown-list .filter-textbox input{border:0;width:100%;padding:0 0 0 26px}.multiselect-dropdown .dropdown-list .filter-textbox input:focus{outline:0}.multiselect-dropdown .multiselect-item-checkbox{border-bottom:1px solid #ccc;padding:10px}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:focus+div:before,.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:hover+div:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:active+div:before{-webkit-transition-duration:0s;transition-duration:0s}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]+div{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]+div:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;-webkit-transition:.4s;transition:.4s}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]+div:after{box-sizing:content-box;content:"";position:absolute;-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50%;transform-origin:50%;-webkit-transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out;background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;-webkit-border-image:none;-o-border-image:none;border-image:none;-webkit-transform:rotate(-45deg) scale(0);transform:rotate(-45deg) scale(0)}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:disabled+div:before{border-color:#ccc}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:disabled:focus+div:before .multiselect-item-checkbox input[type=checkbox]:disabled:hover+div:before{background-color:inherit}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:disabled:checked+div:before{background-color:#ccc}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:checked+div:after{content:"";-webkit-transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out;-webkit-transform:rotate(-45deg) scale(1);transform:rotate(-45deg) scale(1)}.multiselect-dropdown .multiselect-item-checkbox input[type=checkbox]:checked+div:before{-webkit-animation:.2s ease-in borderscale;animation:.2s ease-in borderscale;background:#337ab7}@-webkit-keyframes borderscale{50%{box-shadow:0 0 0 2px #337ab7}}@keyframes borderscale{50%{box-shadow:0 0 0 2px #337ab7}}']}),s("design:paramtypes",[t.ChangeDetectorRef])],e)}(),a=function(){function e(e){this._elementRef=e,this.clickOutside=new t.EventEmitter}return e.prototype.onClick=function(e,t){t&&(this._elementRef.nativeElement.contains(t)||this.clickOutside.emit(e))},o([t.Output(),s("design:type",Object)],e.prototype,"clickOutside",void 0),o([t.HostListener("document:click",["$event","$event.target"]),s("design:type",Function),s("design:paramtypes",[MouseEvent,HTMLElement]),s("design:returntype",void 0)],e.prototype,"onClick",null),e=o([t.Directive({selector:"[clickOutside]"}),s("design:paramtypes",[t.ElementRef])],e)}(),p=function(){function e(){}return e.prototype.transform=function(e,t,i){var n=this;return e&&t&&!i?e.filter(function(e){return n.applyFilter(e,t)}):e},e.prototype.applyFilter=function(e,t){return!(t.text&&e.text&&-1===e.text.toLowerCase().indexOf(t.text.toLowerCase()))},e=o([t.Pipe({name:"ng2ListFilter",pure:!1})],e)}(),u=function(){function e(){}return e=o([t.NgModule({imports:[n.CommonModule,i.FormsModule],declarations:[c,a,p],entryComponents:[c],exports:[c]})],e)}();e.MultiSelectComponent=c,e.NgMultiSelectDropDownModule=u,e.ɵa=r,e.ɵb=a,e.ɵc=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-multiselect-dropdown.umd.min.js.map